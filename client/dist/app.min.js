angular.module("app",[]).constant("partialUrl","./partials").run(["$rootScope","partialUrl",function(a,b){a.partialUrl=b}]),angular.module("app").controller("BenchmarkViewCtrl",["$routeParams",function(){}]),angular.module("app").controller("ExperimentRunnerCtrl",["$scope","$rootScope","$http","benchmarkData",function(a,b,c,d){a.data={backend:{name:"Octave",version:"3.4.3"},benchmark:{name:"escoufier",version:"1.0",iteration:3,scale:22}},a.isPolling=!1,a.sendRunCommand=function(){a.isPolling=!0,a.data.benchmark.iteration=parseInt(a.data.benchmark.iteration,10),a.data.benchmark.scale=parseInt(a.data.benchmark.scale,10),c.post("http://184.107.193.50:8080/performance/run",a.data).success(function(b){function c(){jQuery.get("http://184.107.193.50:8080/tasks/"+e).success(function(b){console.log(b.result.status,"done"===b.result.status),"done"===b.result.status?(clearInterval(f),a.$apply(function(){d.getAll(),a.isPolling=!1})):"failed"===b.result.status&&(clearInterval(f),a.$apply("isPollied = false"))}).error(function(){clearInterval(f),a.$apply("isPollied = false")})}var e=b.result[1].id,f=setInterval(c,2e3)}).error(function(){alert("An error occurred!"),console.log("error running the tasks",arguments),a.isPolling=!1})},a.open=function(b,c){c||(c={benchmark:{name:a.benchmark.instances[0].benchmarkName,version:a.benchmark.instances[0].benchmarkVersion}}),jQuery.extend(!0,a.data,c),a.shouldBeOpen=!0},b.$on("openExperimentRunner",a.open),a.close=function(){a.closeMsg="I was closed at: "+new Date,a.shouldBeOpen=!1},a.items=["item1","item2"],a.opts={backdropFade:!0,dialogFade:!0}}]),angular.module("app").controller("MainCtrl",["$scope","$location","benchmarkData",function(a,b,c){function d(a){return encodeURIComponent(a.name.replace(/ /,"-"))}a.benchmarks=c.getAll(),a.benchmark=null,a.useLogScaleForBubbleSize=!1,a.toogleButtonScale=function(){a.useLogScaleForBubbleSize=!a.useLogScaleForBubbleSize},a.selectBenchmark=function(c){a.benchmark=c,c&&b.url("/benchmark/"+d(c))};var e=a.$watch("benchmarks.length",function(c){if(c){if(0==b.url().indexOf("/benchmark/")){var f=b.url().match(/^\/benchmark\/(.+)/);f?(f=f[1],angular.forEach(a.benchmarks,function(b){f===d(b)&&a.selectBenchmark(b)})):a.selectBenchmark(a.benchmarks[0])}else a.selectBenchmark(a.benchmarks[0]);e()}})}]),angular.module("app").directive("bs3Modal",["$parse","$timeout",function(a,b){return function(c,d,e){function f(a){return g?function(){b(function(){g(c,a)})}:angular.noop}var g=a(e.bs3Modal).assign;c.$watch(e.bs3Modal,function(a){a?d.modal("show"):d.modal("hide")}),d.on("show.bs.modal",f(!0)),d.on("hide.bs.modal",f(!1))}}]),angular.module("app").directive("matlabSrcSyntaxHighlighting",["$http",function(a){return{link:function(b,c,d){function e(){a.get("http://184.107.193.50:8080/instrumentations/756271991/results").success(function(a){var b=c.find("li:not(:last-child)");angular.forEach(a.result.data[0].lines,function(a){var c=b.eq(a.line-1);jQuery.trim(c.text())&&c.append('<span style="float: right">'+a.executed+"</span>")})})}var f="correct = [1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765 10946 17711 28657 46368 75025 121393 196418 317811 514229 832040 1346269 2178309 3524578 5702887 9227465 14930352 24157817 39088169 63245986 102334155];arg_list = argv();\nscale = str2num(arg_list{1});\niteration = str2num(arg_list{2});\n% Fibonacci.m by David Terr, Raytheon, 5-11-04\nfunction fib = Fibonacci(n)\nif ( n ~= floor(n) )\n    error('Argument must be an integer.');\n    return;\nend\nif ~isreal(n)\n    error('Argument must be an integer.');\n    return;\nend\nif size(n,1) ~= 1 || size(n,2) ~= 1\n    error('Argument must be an integer.');\n    return;\nend\nif ( n == 0 )\n    fib = 0;\n    return;\nend\nif ( n == 1 )\n    fib = 1;\n    return;\nend\nif ( n < 0 )\n    fib = (-1)^(n+1) * Fibonacci(-n);\n    return;\nend\nfib = Fibonacci(n-1) + Fibonacci(n-2);\nend\n\n\nfor n = 1:iteration\n    value = Fibonacci(scale);\n    if ((correct(scale) != value)) \n        exit(1);\n    end\nend\nexit(0);",g={"fibonacci 1.0":f};b.$watch(d.benchmarkName,function(b){if(g.hasOwnProperty(b))c.html(g[b]),prettyPrint(),e();else{var d=b.split(" ");a.post("http://184.107.193.50:8080/benchmarks/src",{benchmark:{name:d[0],version:d[1]}}).success(function(a){g[b]=a.result,c.html(g[b]),prettyPrint(),e()})}})}}}]),angular.module("app").directive("scatterPlot",function(){return{link:function(a,b,c){var d=[],e=!0;showUserThePerformanceTestDetails=function(b){var c={backend:{name:"Octave",version:"3.4.3"},benchmark:{name:"escoufier",version:"1.0",iteration:3,scale:22}};c.backend.version=b.backendVersion,c.backend.name=b.backendName,c.benchmark.name=b.benchmarkName,c.benchmark.version=b.benchmarkVersion,c.benchmark.iteration=b.iteration,c.benchmark.scale=b.scale,a.$apply(function(){a.$emit("openExperimentRunner",c)})};var f=function(){console.log(d);var a=!0;a&&b.html("");var c=b.width(),f=300,g=20,h=100,i=d3.select(b[0]).append("svg").attr("width",c).attr("height",f),j=Math.max.apply(Math,d.map(function(a){return a.scale})),k=Math.max.apply(Math,d.map(function(a){return a.runtime})),l=d3.scale.linear().domain([0,j]).range([h,c-g]),m=d3.scale.linear().domain([k,0]).range([g,f-2*g]),n=d3.svg.axis().scale(l).orient("bottom"),o=d3.svg.axis().scale(m).orient("left");i.append("g").attr("class","axis").attr("transform","translate(0, "+(f-g)+")").call(n),i.append("g").attr("class","axis").attr("transform","translate("+(h-g)+", 0)").call(o),i.append("text").attr("class","loading").text("Loading ...").attr("x",function(){return c/2}).attr("y",function(){return f/2-5}),d3.max(d.map(function(a){return a[2]})),d3.scale.linear().domain([0,d3.max(d,function(a){return a[2]})]).range([0,12]);var p=function(a){return l(a.scale)},q=function(a){return m(a.runtime)},r=1,s=function(a){r=e?10:1;var b=a.runtime/a.iteration*r;return console.log("Run time: "+a.runtime),console.log("Dataset size: "+a.iteration),console.log("	Radius: "+b),e&&(b=Math.log(b)),a.runtime<.2?2:2>b?2:b},t=d3.select("body").append("div").style("position","absolute").style("z-index","10").style("visibility","hidden").html(""),u=d3.scale.category20();i.selectAll(".loading").remove(),i.selectAll("circle").data(d).enter().append("circle").attr("class","circle").attr("cx",p).attr("cy",q).attr("r",s).style("fill",function(a,b){return u(b)}).style("opacity",function(){return".9"}).on("mouseover",function(a){return t.style("visibility","visible").html("<div class='run_details_tooltip'>Benchmark: "+a.benchmarkName+"<br/> Time: "+a.runtime+"<br/> Iterations: "+a.iteration+"<br/> Dataset Size: "+a.scale+"</div>")}).on("mousemove",function(){return t.style("top",event.pageY-10+"px").style("left",event.pageX+10+"px")}).on("mouseout",function(){return t.style("visibility","hidden")}).on("click",function(a){showUserThePerformanceTestDetails(a)})};a.$watch(c.useLogBubbleSize,function(a){return e=a,f()}),a.$watchCollection(c.scatterPlot,function(a){return d=a,f()})}}}),angular.module("app").factory("Benchmark",function(){function a(a,b){this.name=a,this.instances=b,this.activeInstances=[].concat(b)}return angular.extend(a.prototype,{isActive:function(a){return-1!==this.activeInstances.indexOf(a)},addActive:function(a){this.isActive(a)||this.activeInstances.push(a)},removeActive:function(a){this.isActive(a)&&this.activeInstances.splice(this.activeInstances.indexOf(a),1)},toggleActive:function(a){this.isActive(a)?this.removeActive(a):this.addActive(a)},addEntry:function(a){this.instances.push(a),this.activeInstances.push(a)},hasEntry:function(a){var b=!1;return angular.forEach(this.instances,function(c){c.startDate===a.startDate&&c.endDate===a.endData&&(b=!0)}),b}}),a}),angular.module("app").service("benchmarkData",["$http","$q","Benchmark",function(a,b,c){var d=[];return{getAll:function(){return a.get("http://184.107.193.50:8080/performance").success(function(a){var b={};angular.forEach(a.result,function(a){var c=a.benchmarkName+" "+a.benchmarkVersion;b[c]||(b[c]=[]),b[c].push(a)});var e={};angular.forEach(d,function(a){e[a.name]=a}),angular.forEach(b,function(a,b){if(e.hasOwnProperty(b)){var f=e[b];angular.forEach(a,function(a){f.hasEntry(a)||f.addEntry(a)})}else d.push(new c(b,a))})}),d}}}]);